<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Select User</title>
  <link rel="stylesheet" href="css/style.css">
  <style>
    .logout-btn { background: #ef4444; color: white; border: none; padding: 8px 15px; border-radius: 6px; cursor: pointer; float: right; margin: 10px; }
    .sup-login-btn { background: #1e293b; color: white; border: none; padding: 10px 20px; border-radius: 8px; cursor: pointer; width: 100%; margin-top: 20px; font-weight: bold; }
    .user-card { border: 1px solid #ddd; padding: 15px; margin: 10px 0; border-radius: 10px; cursor: pointer; text-align: center; background: white; transition: 0.3s; }
    .user-card:hover { background: #f0f7ff; border-color: #2563eb; }
  </style>
</head>
<body onload="onLoadSelectUser()">
  <button class="logout-btn" onclick="logout()">Logout</button>

  <div class="container" style="max-width: 400px; margin: 50px auto; padding: 20px;">
    <h2 style="text-align: center;">üë§ Select Your Name</h2>
    
    <div id="user_list">
      </div>

    <hr style="margin: 30px 0;">
    
    <button class="sup-login-btn" onclick="checkSupervisor()">üõ°Ô∏è Supervisor Login</button>
  </div>

  <script src="js/app.js"></script>
  <script>
    async function onLoadSelectUser() {
        // ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å User ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡πÇ‡∏î‡∏¢‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏¥‡πâ‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ
        sessionStorage.removeItem('selectedUser');
        
        const users = await window.loadUsers();
        const container = document.getElementById('user_list');
        container.innerHTML = users.map(u => `
            <div class="user-card" onclick="selectUser('${u.header}')">
                <strong>${u.header}</strong>
            </div>
        `).join('');
    }

    function selectUser(name) {
        sessionStorage.setItem('selectedUser', name);
        location.href = 'main.html'; // ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ö‡∏¥‡∏Å-‡∏Ñ‡∏∑‡∏ô
    }

    function logout() {
        sessionStorage.clear(); // ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        location.href = 'index.html'; // ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤ Login ‡πÅ‡∏£‡∏Å
    }
  </script>
</body>
</html>
