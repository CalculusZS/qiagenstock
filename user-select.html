<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Select User - Qiagen</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .btn-staff { width:100%; background:white; border:1px solid #e2e8f0; padding:18px; border-radius:12px; font-weight:bold; cursor:pointer; display:flex; align-items:center; gap:12px; transition: 0.2s; }
        .btn-staff:hover { background: #f8fafc; border-color: #2563eb; transform: translateY(-1px); }
        .btn-sup { width: 100%; padding: 16px; background: #0f172a; color: white; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; margin-top: 10px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); }
        .btn-sup:hover { background: #1e293b; }
        .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); backdrop-filter: blur(4px); align-items:center; justify-content:center; z-index:1000; }
        .modal-content { background:white; padding:30px; border-radius:20px; width:90%; max-width:320px; text-align:center; }
    </style>
</head>
<body onload="init()">
    <div style="background:#1e293b; color:white; padding:18px; text-align:center; font-weight:bold; font-size:18px; letter-spacing:1px;">QIAGEN INVENTORY</div>

    <div class="container" style="max-width:420px; margin:30px auto; padding:0 20px;">
        <h3 style="text-align:center; color:#1e293b; margin-bottom:20px;">ðŸ‘¤ Select Staff Name</h3>
        <div id="user_list" style="display:flex; flex-direction:column; gap:12px; margin-bottom:20px;">
            Loading Staff List...
        </div>
        <hr style="border:0; border-top:1px solid #e2e8f0; margin:20px 0;">
        <button onclick="location.href='showall.html'" style="width:100%; padding:15px; background:#eff6ff; border:1px solid #bfdbfe; color:#1e40af; border-radius:12px; font-weight:bold; cursor:pointer; margin-bottom:12px;">ðŸ“¦ View All Parts (0243)</button>
        <button class="btn-sup" onclick="openSupModal()">ðŸ”’ SUPERVISOR ACCESS</button>
    </div>

    <div id="sup_modal" class="modal">
        <div class="modal-content">
            <h3 style="margin-top:0;">Supervisor Login</h3>
            <input type="password" id="sup_pass_input" placeholder="Password" style="width:100%; padding:12px; margin-bottom:15px; border:1px solid #ddd; border-radius:10px; text-align:center; box-sizing:border-box; font-size:18px;">
            <div style="display:flex; gap:10px;">
                <button onclick="closeSupModal()" style="flex:1; padding:10px; background:#f1f5f9; border:none; border-radius:10px; cursor:pointer;">Cancel</button>
                <button onclick="submitSupLogin()" style="flex:2; padding:10px; background:#1e293b; color:white; border:none; border-radius:10px; cursor:pointer; font-weight:bold;">Login</button>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script>
        async function init() {
            const users = await window.loadUsers();
            const container = document.getElementById('user_list');
            if (users && users.length > 0) {
                container.innerHTML = users.map(u => `
                    <button class="btn-staff" onclick="selectUser('${u.header}')">
                        <span style="font-size:20px;">ðŸ‘¤</span> ${u.header}
                    </button>`).join('');
            } else { container.innerHTML = 'Staff List Empty'; }
        }
        function selectUser(name) { sessionStorage.setItem('selectedUser', name); location.href = 'main.html'; }
        function openSupModal() { document.getElementById('sup_modal').style.display='flex'; document.getElementById('sup_pass_input').focus(); }
        function closeSupModal() { document.getElementById('sup_modal').style.display='none'; }
        function submitSupLogin() {
            if(document.getElementById('sup_pass_input').value === SUP_PASSWORD) {
                sessionStorage.setItem('isSupervisor', 'true');
                location.href = 'supervisor.html';
            } else { alert('Wrong Password!'); }
        }
    </script>
</body>
</html>
